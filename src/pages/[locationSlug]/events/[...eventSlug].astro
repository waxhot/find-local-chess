---
import { getCollection } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const eventEntries = await getCollection('events');
  return eventEntries.map(entry => ({
    params: { locationSlug: entry.data.locationSlug, eventSlug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<BaseLayout title={`${entry.data.title} - Find Local Chess`}>
  <div>
    <article>
      <header>
        <h1>{entry.data.title}</h1>
        
        <div>
          <div>
            <h3>ğŸ“… When</h3>
            <p><strong>{entry.data.day}</strong></p>
            <p>{entry.data.time}</p>
          </div>
          
          <div>
            <h3>ğŸ“ Where</h3>
            <p><strong>{entry.data.location}</strong></p>
            {entry.data.address && <p>{entry.data.address}</p>}
          </div>
          
          <div>
            <h3>ğŸ‘¥ Organizer</h3>
            <p>{entry.data.organizer}</p>
            {entry.data.contact && (
              <p><a href={`mailto:${entry.data.contact}`}>{entry.data.contact}</a></p>
            )}
          </div>
        </div>
        
        <div>
          {entry.data.entryFee && (
            <div>
              <strong>ğŸ’° Entry Fee:</strong> {entry.data.entryFee}
            </div>
          )}
          
          {entry.data.timeControl && (
            <div>
              <strong>â±ï¸ Time Control:</strong> {entry.data.timeControl}
            </div>
          )}
          
          {entry.data.rounds && (
            <div>
              <strong>ğŸ† Rounds:</strong> {entry.data.rounds}
            </div>
          )}
          
          {entry.data.link && (
            <div>
              <strong>ğŸ”— More Info:</strong> <a href={entry.data.link} target="_blank" rel="noopener noreferrer">Visit website</a>
            </div>
          )}
        </div>
        
        {entry.data.tags.length > 0 && (
          <div>
            {entry.data.tags.map(tag => (
              <span>{tag}</span>
            ))}
          </div>
        )}
      </header>
      
      <div>
        <Content />
      </div>
      
      <footer>
        <p><a href={`/${entry.data.locationSlug}/events`}>â† Back to all events</a></p>
      </footer>
    </article>
  </div>
</BaseLayout>